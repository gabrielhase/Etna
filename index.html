<!Doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/mapbox.css">
    <link rel="stylesheet" href="css/map.css">
    <link rel="stylesheet" href="css/barchart.css">
    <link rel="stylesheet" href="css/sentiment.css">
    <link rel="stylesheet" href="css/bootstrap.css">

    <script src="js/vendor/d3.v3.js"></script>
    <script src="js/vendor/jquery-1.9.1.js"></script>
    <script src="js/vendor/mapbox.js"></script>
    <!-- Templating -->
    <script src="js/vendor/underscore.js"></script>

    <script src="js/templates.js"></script>
    <script src="js/eruptions.js"></script>
    <script src="js/d3layer.js"></script>
    <script src="js/map.js"></script>
    <script src="js/towns.js"></script>
    <script src="js-sebastian/tweets.js"></script>
    <script src="js-sebastian/sentiment.js"></script>
  </head>

  <body class="container">
    <div class="row">
      <div class="span8">
      <h1>Etna: Curse or Attraction?</h1>
      <p>TODO: Intro with article from The Economist.</p>
      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Natus, cum, delectus laboriosam ut quo modi veritatis atque sint incidunt voluptatem quidem perferendis dolores eligendi fugiat dolorum ipsa recusandae quibusdam veniam!</p>
      </div>
      <div class="span4">

      </div>
    </div>
    <br/>
    <br/>
    <div class="row">
      <div class="span12">
        <h2>Living around Etna</h2>
        <p>TODO: text to explain the visualization and background like the VEI.</p>
      </div>

      <div class="span8" style="position: relative; height: 500px">
        <div id="map-container">
          <div id='map'>
          </div>

          <div id="map-regions">
            <div class="corner">
              <a href="" class="home-link image-link" data-region="map">
                <img src="img/volcano_icon.png" alt="Region Etna" width="47" style="border-bottom: 1px solid #eee" />
                <span style="position:absolute; top: 15px; left: 50px;">To Etna</span>
              </a>
            </div>

            <div class="content">
              <hr>
              <ul class="legend">
                <li><img src="img/plume_icon.png" width="15" height="15" /> <span>Plume Area</span></li>
                <li><img src="img/explosion_icon.png" width="15" height="15" /> <span>Explosion</span></li>
                <li><img src="img/ash_icon.png" width="15" height="15" /> <span>Ashfall</span></li>
              </ul>
            </div>
          </div>

          <div id="map-legend" class="transparent">
            <h4>Eruptions at Mt. Etna<small>&nbsp;Use the mouse to select</small></h4>
            <a class="close-map-legend legend-close-link" href="">x</a>
          </div>

          <div id="map-legend-teaser" style="display:none">
            <a href="" class="open-map-legend">All volcano eruptions</a>
          </div>

        </div>
      </div>

      <div class="span4">
        <div id="towns-explorer">
        </div>
      </div>
    </div>
    <div class="clearfix"></div>
    <div class="row" style="position:relative; height: 400px">
      <h2>Etna as a tourist attraction</h2>
      <p>TODO: text about volcano travelling and Etna tours.</p>
      <div id="sentiment">
        <div id="legend">
          <div id="neg_legend"><strong>negative</strong></div>
          <div id="neu_legend"><strong>neutral</strong></div>
          <div id="pos_legend"><strong>positive</strong></div>
        </div>

        <div id="scale_nr">
          <div id="_nr"><strong>nr</strong></div>
          <div id="negative_nr"><strong></strong></div>
          <div id="neutral_nr"><strong></strong></div>
          <div id="positive_nr"><strong></strong></div>
        </div>

        <div id="svgContainer" onmousemove="etna.sentimentChart.myMM(event);" onmouseout="etna.sentimentChart.hideTooltip();"></div>

        <div id="scale">
          <div id="nr"><strong>nr</strong></div>
          <div id="negative"><strong></strong></div>
          <div id="neutral"><strong></strong></div>
          <div id="positive"><strong></strong></div>
        </div>

        <div id="choice">
          <input type="checkbox" id="chkbx" name="list" value="1">colorblind friendly colorscheme<br></input>
          <div id="drpdwn"></div>
        </div>
      </div>
      <div id="tooltip" class="Invisible"></div>
    </div>

    <div class="row">
      <p>TODO: closing comments</p>
    </div>

    <script>
      $(document).ready( function() {
        // redirect in case of a https domain (e.g. GDrive)
        if (window.location.protocol == 'https:') {
          window.location = 'http://eye-on-etna.herokuapp.com/'
        }

        d3.json('data/towns.json', function(error, towns) {
          if (error) {
            console.log(error);
          }
          // init the towns navigation
          $("#towns-explorer").html(etna.templates.townsNavigation(towns));
          d3.json('data/etna-history2.json', function(error, eruptions) {
            if (error) {
              console.log(error);
            }
            // init the map
            etna.map.init(towns, eruptions);
            etna.townsExplorer.init(towns);
          });
        });
        // init the sentiment chart
        etna.sentimentChart.init();
      });
    </script>
  </body>
</html>